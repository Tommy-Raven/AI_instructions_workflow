version: 2
updates:

  # ───────────────────────────────────────────────
  # 1. Python Dependencies (SSWG Core Only)
  # ───────────────────────────────────────────────
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
    allow:
      # Only dependencies that matter to SSWG internals
      - dependency-type: "direct"
    commit-message:
      prefix: "deps"
      prefix-development: "deps-dev"
      include: "scope"
    labels:
      - "dependency-update"
      - "sswg-core"
    groups:
      sswg-core-deps:
        patterns:
          - "jsonschema*"
          - "pydantic*"
          - "graphviz*"
          - "rich*"
          - "anyio*"
          - "deepdiff*"
          - "pytest*"
          - "mypy*"
          - "ruff*"
          - "black*"
          - "isort*"

  # ───────────────────────────────────────────────
  # 2. GitHub Actions Dependencies
  # ───────────────────────────────────────────────
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    commit-message:
      prefix: "ci"
      include: "scope"
    labels:
      - "ci"
      - "dependency-update"
    groups:
      core-ci-actions:
        patterns:
          - "actions/*"
          - "peter-evans/*"

  # ───────────────────────────────────────────────
  # 3. Security-critical dependencies (Auto)
  # ───────────────────────────────────────────────
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "daily"
    allow:
      - dependency-type: "direct"
    labels:
      - "security"
      - "sswg-core"
    commit-message:
      prefix: "security"
    groups:
      security-patches:
        patterns:
          - "*"
    # Auto-merge only for security-critical updates
    open-pull-requests-limit: 3
